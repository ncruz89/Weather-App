const tempContainer=document.querySelector(".temp"),windContainer=document.querySelector(".wind"),unitToggleBtn=document.querySelector(".toggle-btn"),ToggleBtnInnerCircle=document.querySelector(".inner-circle"),unitHeader=document.querySelector(".unit-header"),searchBar=document.querySelector(".search-bar"),searchBtn=document.querySelector(".search button");let currSearch="";const weather={api_key:"1d0a5272af38a018174b126e2c5e4226",locData:{},fetchWeather:function(e,t="imperial"){fetch(`https://api.openweathermap.org/data/2.5/weather?q=${e}&units=${t}&appid=${this.api_key}`).then((e=>e.json())).then((e=>this.displayWeather(e,t))).catch((e=>console.log(e,"ðŸ’¥")))},displayWeather:function(e,t){console.log(e);const{name:n}=e,{icon:r,description:c}=e.weather[0],{temp:o,humidity:a}=e.main,{speed:i}=e.wind;document.querySelector(".city").innerText=`Weather in ${n}`,document.querySelector(".icon").src=`http://openweathermap.org/img/wn/${r}.png`,document.querySelector(".description").innerText=c,tempContainer.innerHTML=Math.round(o)+""+("imperial"===t?" &#x2109":" &#8451"),document.querySelector(".humidity").innerText=`Humidity: ${a}%`,windContainer.innerText="Wind speed: "+Math.round(i)+("imperial"===t?" mp/h":" km/h"),document.querySelector(".weather").classList.remove("loading"),document.body.style.backgroundImage=`url('https://source.unsplash.com/1920x1080/?${n}&content_filter=high&topics=id_or_slug')`},search:function(){searchBar.value&&(unitToggleBtn.classList.remove("active"),currSearch=searchBar.value,this.fetchWeather(currSearch),searchBar.value="")}};searchBtn.addEventListener("click",(function(){weather.search()})),document.addEventListener("keyup",(function(e){console.log(e),"Enter"===e.key&&weather.search()})),unitToggleBtn.addEventListener("click",(function(){console.log(currSearch),this.classList.contains("active")?(this.classList.remove("active"),unitHeader.innerHTML="&#x2109",weather.fetchWeather(currSearch)):this.classList.contains("active")||(this.classList.add("active"),unitHeader.innerHTML="&#8451",weather.fetchWeather(currSearch,"metric"))})),window.addEventListener("load",(function(){!async function(){try{const e=await new Promise((function(e,t){navigator.geolocation.getCurrentPosition((t=>e(t)),(e=>t(e)))})),{latitude:t,longitude:n}=e.coords;console.log(t,n);const r=await fetch(`https://geocode.xyz/${t},${n}?json=1`);if(console.log(r),!r.ok){if(console.log(r),403===r.status)return window.location.reload();throw new Error("Problem getting your location data")}locData=await r.json(),currSearch=locData.city,weather.fetchWeather(currSearch)}catch(e){console.log(e)}}()}));
//# sourceMappingURL=index.db346c5f.js.map
